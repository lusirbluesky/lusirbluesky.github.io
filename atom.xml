<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>phoenix&#39;s blog</title>
  
  <subtitle>In the future you will appreciate your desperate effort now</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://lusirbluesky.github.io/"/>
  <updated>2018-01-28T09:29:18.989Z</updated>
  <id>http://lusirbluesky.github.io/</id>
  
  <author>
    <name>phoenix</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>关于_config.yml文件</title>
    <link href="http://lusirbluesky.github.io/2018/01/28/hexo_config.yml/"/>
    <id>http://lusirbluesky.github.io/2018/01/28/hexo_config.yml/</id>
    <published>2018-01-28T09:05:00.007Z</published>
    <updated>2018-01-28T09:29:18.989Z</updated>
    
    <content type="html"><![CDATA[<h1 id="主要参数介绍"><a href="#主要参数介绍" class="headerlink" title="主要参数介绍"></a>主要参数介绍</h1><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hexo Configuration</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/configuration.html</span></span><br><span class="line"><span class="comment">## Source: https://github.com/hexojs/hexo/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Site</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo</span> <span class="comment">#网站标题</span></span><br><span class="line"><span class="attr">subtitle:</span>   <span class="comment">#网站副标题</span></span><br><span class="line"><span class="attr">description:</span>  <span class="comment">#网站描述</span></span><br><span class="line"><span class="attr">author:</span> <span class="string">John</span> <span class="string">Doe</span>  <span class="comment">#作者</span></span><br><span class="line"><span class="attr">language:</span>    <span class="comment">#语言</span></span><br><span class="line"><span class="attr">timezone:</span>    <span class="comment">#网站时区。Hexo 默认使用您电脑的时区。时区列表。比如说：America/New_York, Japan, 和 UTC 。</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># URL</span></span><br><span class="line"><span class="comment">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span></span><br><span class="line"><span class="attr">url:</span> <span class="attr">http://yoursite.com</span>   <span class="comment">#你的站点Url</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span>                       <span class="comment">#站点的根目录</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span>   <span class="comment">#文章的 永久链接 格式   </span></span><br><span class="line"><span class="attr">permalink_defaults:</span>    <span class="comment">#永久链接中各部分的默认值</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Directory   </span></span><br><span class="line"><span class="attr">source_dir:</span> <span class="string">source</span>   <span class="comment">#资源文件夹，这个文件夹用来存放内容</span></span><br><span class="line"><span class="attr">public_dir:</span> <span class="string">public</span>     <span class="comment">#公共文件夹，这个文件夹用于存放生成的站点文件。</span></span><br><span class="line"><span class="attr">tag_dir:</span> <span class="string">tags</span>         <span class="comment"># 标签文件夹     </span></span><br><span class="line"><span class="attr">archive_dir:</span> <span class="string">archives</span>    <span class="comment">#归档文件夹</span></span><br><span class="line"><span class="attr">category_dir:</span> <span class="string">categories</span>      <span class="comment">#分类文件夹</span></span><br><span class="line"><span class="attr">code_dir:</span> <span class="string">downloads/code</span>     <span class="comment">#Include code 文件夹</span></span><br><span class="line"><span class="attr">i18n_dir:</span> <span class="string">:lang</span>                <span class="comment">#国际化（i18n）文件夹</span></span><br><span class="line"><span class="attr">skip_render:</span>                <span class="comment">#跳过指定文件的渲染，您可使用 glob 表达式来匹配路径。    </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Writing</span></span><br><span class="line"><span class="attr">new_post_name:</span> <span class="string">:title.md</span> <span class="comment"># 新文章的文件名称</span></span><br><span class="line"><span class="attr">default_layout:</span> <span class="string">post</span>     <span class="comment">#预设布局</span></span><br><span class="line"><span class="attr">titlecase:</span> <span class="literal">false</span> <span class="comment"># 把标题转换为 title case</span></span><br><span class="line"><span class="attr">external_link:</span> <span class="literal">true</span> <span class="comment"># 在新标签中打开链接</span></span><br><span class="line"><span class="attr">filename_case:</span> <span class="number">0</span>     <span class="comment">#把文件名称转换为 (1) 小写或 (2) 大写</span></span><br><span class="line"><span class="attr">render_drafts:</span> <span class="literal">false</span>  <span class="comment">#是否显示草稿</span></span><br><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">false</span>  <span class="comment">#是否启动 Asset 文件夹</span></span><br><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span>      <span class="comment">#把链接改为与根目录的相对位址    </span></span><br><span class="line"><span class="attr">future:</span> <span class="literal">true</span>                <span class="comment">#显示未来的文章</span></span><br><span class="line"><span class="attr">highlight:</span>                    <span class="comment">#内容中代码块的设置    </span></span><br><span class="line"><span class="attr">  enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  line_number:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">  auto_detect:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  tab_replace:</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Category &amp; Tag</span></span><br><span class="line"><span class="attr">default_category:</span> <span class="string">uncategorized</span></span><br><span class="line"><span class="attr">category_map:</span>          <span class="comment">#分类别名</span></span><br><span class="line"><span class="attr">tag_map:</span>            <span class="comment">#标签别名</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Date / Time format</span></span><br><span class="line"><span class="comment">## Hexo uses Moment.js to parse and display date</span></span><br><span class="line"><span class="comment">## You can customize the date format as defined in</span></span><br><span class="line"><span class="comment">## http://momentjs.com/docs/#/displaying/format/</span></span><br><span class="line"><span class="attr">date_format:</span> <span class="string">YYYY-MM-DD</span>         <span class="comment">#日期格式</span></span><br><span class="line"><span class="attr">time_format:</span> <span class="attr">HH:mm:ss</span>        <span class="comment">#时间格式    </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Pagination</span></span><br><span class="line"><span class="comment">## Set per_page to 0 to disable pagination</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span>    <span class="comment">#分页数量</span></span><br><span class="line"><span class="attr">pagination_dir:</span> <span class="string">page</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">landscape</span>   <span class="comment">#主题名称</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="comment">#  部署部分的设置</span></span><br><span class="line"><span class="attr">deploy:</span>     </span><br><span class="line"><span class="attr">  type:</span>  <span class="comment">#类型，常用的git</span></span><br></pre></td></tr></table></figure><p><a href="https://my.oschina.net/u/1861837/blog/526142" target="_blank" rel="noopener">_config.yml 的YAML语法格式</a></p><p><a href="https://hexo.io/zh-cn/docs/configuration.html" target="_blank" rel="noopener">_config.yml配置官方文档</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;主要参数介绍&quot;&gt;&lt;a href=&quot;#主要参数介绍&quot; class=&quot;headerlink&quot; title=&quot;主要参数介绍&quot;&gt;&lt;/a&gt;主要参数介绍&lt;/h1&gt;&lt;figure class=&quot;highlight yaml&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutt
      
    
    </summary>
    
      <category term="hexo" scheme="http://lusirbluesky.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://lusirbluesky.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo常用命令</title>
    <link href="http://lusirbluesky.github.io/2018/01/28/hexo/"/>
    <id>http://lusirbluesky.github.io/2018/01/28/hexo/</id>
    <published>2018-01-28T08:37:40.427Z</published>
    <updated>2018-02-06T08:12:33.091Z</updated>
    
    <content type="html"><![CDATA[<h1 id="常见命令"><a href="#常见命令" class="headerlink" title="常见命令"></a>常见命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"postName"</span> <span class="comment">#新建文章</span></span><br><span class="line">hexo new page <span class="string">"pageName"</span> <span class="comment">#新建页面</span></span><br><span class="line">hexo generate <span class="comment">#生成静态页面至public目录</span></span><br><span class="line">hexo server <span class="comment">#开启预览访问端口（默认端口4000，'ctrl + c'关闭server）</span></span><br><span class="line">hexo deploy <span class="comment">#部署到GitHub</span></span><br><span class="line">hexo <span class="built_in">help</span>  <span class="comment"># 查看帮助</span></span><br><span class="line">hexo version  <span class="comment">#查看Hexo的版本</span></span><br></pre></td></tr></table></figure><h1 id="缩写"><a href="#缩写" class="headerlink" title="缩写"></a>缩写</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo n == hexo new</span><br><span class="line">hexo g == hexo generate</span><br><span class="line">hexo s == hexo server</span><br><span class="line">hexo d == hexo deploy</span><br></pre></td></tr></table></figure><h1 id="组合命令"><a href="#组合命令" class="headerlink" title="组合命令"></a>组合命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo s -g <span class="comment">#生成并本地预览</span></span><br><span class="line">hexo d -g <span class="comment">#生成并上传</span></span><br></pre></td></tr></table></figure><p>修改后本地测试已经变化但是提交到github上无变化，请依次执行下面命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean </span><br><span class="line">hexo g  </span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure><p><a href="http://ijiaober.github.io/2014/08/07/hexo" target="_blank" rel="noopener">参考Hexo的配置使用</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;常见命令&quot;&gt;&lt;a href=&quot;#常见命令&quot; class=&quot;headerlink&quot; title=&quot;常见命令&quot;&gt;&lt;/a&gt;常见命令&lt;/h1&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre
      
    
    </summary>
    
      <category term="hexo" scheme="http://lusirbluesky.github.io/categories/hexo/"/>
    
    
      <category term="hexo" scheme="http://lusirbluesky.github.io/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>zookeeper</title>
    <link href="http://lusirbluesky.github.io/2018/01/28/zookeeper/"/>
    <id>http://lusirbluesky.github.io/2018/01/28/zookeeper/</id>
    <published>2018-01-28T08:32:42.247Z</published>
    <updated>2018-02-03T13:25:16.096Z</updated>
    
    <content type="html"><![CDATA[<h1 id="zookeeper"><a href="#zookeeper" class="headerlink" title="zookeeper"></a>zookeeper</h1><h4 id="是什么"><a href="#是什么" class="headerlink" title="是什么"></a>是什么</h4><ul><li>一个分布式协调服务的开源框架（抽象/高大上）</li><li>一个分布式小文件存储系统（形象具体）</li></ul><ul><li>数据存储方式<ul><li>文件系统目录树<ul><li>便于对树节点进行有效管理</li><li>便于监控维护存储的数据的状态变化，从而达到基于数据的集群管理<ul><li>统一命名服务</li><li>分布式配置管理</li><li>分布式消息队列</li><li>分布式锁</li><li>分布式协调</li></ul></li></ul></li></ul></li></ul><h4 id="主要作用"><a href="#主要作用" class="headerlink" title="主要作用"></a>主要作用</h4><ul><li>解决分布式集群中应用系统一致性问题（避免同时操作同一数据造成脏读等）</li></ul><h4 id="角色与职能"><a href="#角色与职能" class="headerlink" title="角色与职能"></a>角色与职能</h4><ul><li>leader<ul><li>集群工作的核心</li><li>事务请求（写操作）的唯一调度者和处理者，保证集群事务处理的顺序性</li><li>集群内部各个服务器的调度者<ul><li>写操作<ul><li>create</li><li>setData</li><li>delete</li></ul></li></ul></li></ul></li><li>follower<ul><li>处理客户端非事务请求（读操作），事务请求转发给leader</li><li>参与集群leader的选举投票</li></ul></li><li>observer<ul><li>观察zookeeper集群的最新状态变化并同步</li><li>可以独立处理客户端的非事务请求，事务请求转发给leader</li><li>不参与任何形式的投票</li><li>通常在不影响集群事务处理能力的前提下提升的非事务处理能力</li><li>case:某电商项目读压力较大，可以在zk cluster中添加若干台server充当observer，用于水平扩展</li></ul></li></ul><h4 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h4><ul><li>全局数据一致性<ul><li>每个server保存一份相同的数据副本，client连接到哪个server，看到的数据都一致</li></ul></li><li>可靠性<ul><li>如果消息被其中一台服务器接收，那么将被所有服务器接收</li></ul></li><li>顺序性<ul><li>全局有序<ul><li>如果在一台服务器上，消息a在消息b前发布，那么在所有server上都是消息a在消息b前发布</li></ul></li><li>偏序<ul><li>如果一消息b在消息a之后被同一发送者发布，那么a必将排在b的前面</li></ul></li></ul></li><li>数据更新的原子性<ul><li>一次数据更新要么全部成功（半数以上节点成功），要么全部失败，没有中间状态</li></ul></li><li>实时性<ul><li>zookeeper保证客户端在一定的时间间隔内获得服务器的更新信息或者服务器的失效信息</li></ul></li></ul><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>​    以下是设置服务器的步骤，这些服务器将成为整体的一部分。这些步骤应该在集合中的每个主机上执行：</p><ol><li><p>安装Java JDK。您可以在您的系统上使用本地打包系统，或从以下位置下载JDK：</p><p><a href="http://java.sun.com/javase/downloads/index.jsp" target="_blank" rel="noopener">http://java.sun.com/javase/downloads/index.jsp</a></p></li><li><p>设置Java堆大小。这是非常重要的，以避免交换，这将严重降低ZooKeeper性能。要确定正确的值，请使用负载测试，并确保您远低于可能导致交换的使用限制。保守 - 对于4GB机器，最大堆大小为3GB。</p></li><li><p>安装ZooKeeper服务器包。它可以从以下网址下载：</p><p><a href="http://zookeeper.apache.org/releases.html" target="_blank" rel="noopener">http://zookeeper.apache.org/releases.html</a></p></li><li><p>创建一个配置文件。这个文件可以被称为任何东西。使用以下设置作为起点：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">tickTime = 2000 </span><br><span class="line">dataDir = / var / lib / zookeeper / </span><br><span class="line">clientPort = 2181 </span><br><span class="line">initLimit = 5 </span><br><span class="line">syncLimit = 2 </span><br><span class="line">server.1 = zoo1：2888：3888 </span><br><span class="line">server.2 = zoo2：2888：3888 </span><br><span class="line">server.3 = zoo3：2888：3888</span><br></pre></td></tr></table></figure><p>您可以在<a href="http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_configuration" target="_blank" rel="noopener">配置参数</a>部分找到这些配置和其他配置设置的含义。一个字虽然在这里几个：</p><p>每个属于ZooKeeper集合的机器都应该知道集合中的每一台机器。您可以使用<strong>server.id = host：port：port</strong>格式的一系列行完成此操作。参数<strong>主机</strong>和<strong>端口</strong>是直接的。通过创建一个名为myid的文件（每个服务器驻留在该服务器的数据目录中），将服务器ID分配给每台计算机 ，如配置文件参数<strong>dataDir</strong>所指定的。</p></li><li><p>myid文件由一行仅包含该机器ID的文本组成。所以服务器1的myid将包含文本“1”，而不是别的。id在集合中必须是唯一的，并且应该具有1到255之间的值。</p></li><li><p>如果你的配置文件设置好了，你可以启动一个ZooKeeper服务器：</p><p>$ java -cp zookeeper.jar：lib / slf4j-api-1.6.1.jar：lib / slf4j-log4j12-1.6.1.jar：lib / log4j-1.2.15.jar：conf \ org.apache.zookeeper。 server.quorum.QuorumPeerMain zoo.cfg</p><p>QuorumPeerMain启动一个ZooKeeper服务器， <a href="http://java.sun.com/javase/technologies/core/mntr-mgmt/javamanagement/" target="_blank" rel="noopener">JMX</a> 管理bean也被注册，允许通过一个JMX管理控制台进行管理。该<a href="http://zookeeper.apache.org/doc/current/zookeeperJMX.html" target="_blank" rel="noopener">ZooKeeper的JMX文件</a>包含有关使用JMX管理ZooKeeper的细节。</p><p>有关启动服务器实例的示例，请参阅发行版中包含的脚本<em>bin / zkServer.sh</em>。</p></li><li><p>通过连接到主机来测试您的部署：</p><p>在Java中，您可以运行以下命令来执行简单的操作：</p><p>$ bin / zkCli.sh -server 127.0.0.1:2181</p><p><a href="http://zookeeper.apache.org/doc/current/zookeeperAdmin.html" target="_blank" rel="noopener">Apache官方安装说明</a></p></li></ol><h4 id="安装方式"><a href="#安装方式" class="headerlink" title="安装方式"></a>安装方式</h4><ul><li>单机模式</li><li>伪集群模式</li><li>集群模式</li></ul><h4 id="运行模式"><a href="#运行模式" class="headerlink" title="运行模式"></a>运行模式</h4><ul><li>单机模式<ul><li>standalone mode</li><li>便于评估、开发和测试</li><li>主要用于开发测试环境</li></ul></li><li>集群模式<ul><li>replicated mode</li><li>用于生产环境</li></ul></li></ul><h4 id="一个zookeeper集群的机器数"><a href="#一个zookeeper集群的机器数" class="headerlink" title="一个zookeeper集群的机器数"></a>一个zookeeper集群的机器数</h4><ul><li>仲裁集（<em>quorum</em>）</li><li>有相同的配置文件副本</li><li>至少需要三台服务器，为了更好的容错能力和更大的可靠性可以配置五台</li><li>官方强烈推荐基数台</li><li>半数以上节点存活才能正常运行</li><li>3台服务器和4台服务器的的容灾能力是一样的，所以为了节省服务器资源，一般我们采用奇数个数，作为服务器部署个数</li></ul><blockquote><p>Note</p><p>As mentioned in the <a href="http://zookeeper.apache.org/doc/current/zookeeperStarted.html" target="_blank" rel="noopener">ZooKeeper Getting Started Guide</a> , a minimum of three servers are required for a fault tolerant clustered setup, and it is strongly recommended that you have an odd number of servers.</p><p>Usually three servers is more than enough for a production install, but for maximum reliability during maintenance, you may wish to install five servers. With three servers, if you perform maintenance on one of them, you are vulnerable to a failure on one of the other two servers during that maintenance. If you have five of them running, you can take one down for maintenance, and know that you’re still OK if one of the other four suddenly fails.</p><p>Your redundancy considerations should include all aspects of your environment. If you have three ZooKeeper servers, but their network cables are all plugged into the same network switch, then the failure of that switch will take down your entire ensemble.</p><p>容错集群设置至少需要三台服务器，强烈建议您有奇数个服务器</p><p>通常情况下，对于一个生产环境安装三台服务器足够了，但是在运维期间，为了最大的可靠性，你可能希望安装五台服务器。在三台服务器的集群中，如果你正在其中一台上进行维护操作，在维护期间，你很容易受到其他两台服务器中的一台出现故障的影响。如果有五台服务器正在运行，你可以维护其中一台并且知道如果其他四台中的一台宕机仍然可以正常工作。</p><p>你的冗余考虑应该包括所有环境方面的因素。如果你有三台zookeeper服务器，但他们的网络电缆都插进了相同的网络交换机，那么交换机故障会让你的整个集群宕掉。</p></blockquote><p><a href="http://zookeeper.apache.org/doc/current/zookeeperAdmin.html" target="_blank" rel="noopener">请重点参阅</a></p><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ul><li>主从vs主备<ul><li>主从：各个节点数据不一致</li><li>主备：各个服务器的数据一致，互为副本</li></ul></li><li>数据副本<ul><li>包括自己</li></ul></li></ul><h4 id="选举机制"><a href="#选举机制" class="headerlink" title="选举机制"></a>选举机制</h4><h4 id="相关协议"><a href="#相关协议" class="headerlink" title="相关协议"></a>相关协议</h4><p>ZAB（zookeeper automatic broadcast）</p><p><a href="http://www.cnblogs.com/peerslee/p/8144625.html" target="_blank" rel="noopener">ZAB 协议</a></p><h4 id="相关算法"><a href="#相关算法" class="headerlink" title="相关算法"></a>相关算法</h4><ul><li>Paxos</li><li>FastLeaderElection</li></ul><h4 id="ZooKeeper、Eureka对比"><a href="#ZooKeeper、Eureka对比" class="headerlink" title="ZooKeeper、Eureka对比"></a>ZooKeeper、Eureka对比</h4><blockquote><p> Eureka本身是Netflix开源的一款提供服务注册和发现的产品，并且提供了相应的Java封装。在它的实现中，节点之间相互平等，部分注册中心的节点挂掉也不会对集群造成影响，即使集群只剩一个节点存活，也可以正常提供发现服务。哪怕是所有的服务注册节点都挂了，Eureka Clients（客户端）上也会缓存服务调用的信息。这就保证了我们微服务之间的互相调用足够健壮。</p><p>Zookeeper主要为大型分布式计算提供开源的分布式配置服务、同步服务和命名注册。曾经是Hadoop项目中的一个子项目，用来控制集群中的数据，目前已升级为独立的顶级项目。很多场景下也用它作为Service发现服务解决方案。</p><p>在分布式系统中有个著名的CAP定理（C-数据一致性；A-服务可用性；P-服务对网络分区故障的容错性，这三个特性在任何分布式系统中不能同时满足，最多同时满足两个）；</p></blockquote><ul><li><p>ZooKeeper基于CP，不保证高可用，如果zookeeper正在选主，或者Zookeeper集群中半数以上机器不可用，那么将无法获得数据。Eureka基于AP，能保证高可用，即使所有机器都挂了，也能拿到本地缓存的数据。作为注册中心，其实配置是不经常变动的，只有发版和机器出故障时会变。对于不经常变动的配置来说，CP是不合适的，而AP在遇到问题时可以用牺牲一致性来保证可用性，既返回旧数据，缓存数据。</p><p>所以理论上Eureka是更适合作注册中心。而现实环境中大部分项目可能会使用ZooKeeper，那是因为集群不够大，并且也比基本不会遇到用做注册中心的机器一半以上都挂了的情况。所以实际上也没什么大问题。</p></li><li><p><a href="http://tech.lede.com/2017/03/15/rd/server/SpringCloud1/" target="_blank" rel="noopener">参考</a></p></li><li><p><a href="https://www.cnblogs.com/jieqing/p/8394001.html" target="_blank" rel="noopener">原文地址</a></p></li><li><p><a href="https://mp.weixin.qq.com/s/8Vul5mBo2ReQYQL3nX81XA" target="_blank" rel="noopener">java葵花宝典</a></p></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;zookeeper&quot;&gt;&lt;a href=&quot;#zookeeper&quot; class=&quot;headerlink&quot; title=&quot;zookeeper&quot;&gt;&lt;/a&gt;zookeeper&lt;/h1&gt;&lt;h4 id=&quot;是什么&quot;&gt;&lt;a href=&quot;#是什么&quot; class=&quot;headerlink
      
    
    </summary>
    
      <category term="tech" scheme="http://lusirbluesky.github.io/categories/tech/"/>
    
    
      <category term="zookeeper" scheme="http://lusirbluesky.github.io/tags/zookeeper/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://lusirbluesky.github.io/2018/01/28/%E5%89%8D%E7%AB%AF/Hexo/hello-world/"/>
    <id>http://lusirbluesky.github.io/2018/01/28/前端/Hexo/hello-world/</id>
    <published>2018-01-28T06:40:22.312Z</published>
    <updated>2018-02-06T06:37:18.878Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
      <category term="前端" scheme="http://lusirbluesky.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="Hexo" scheme="http://lusirbluesky.github.io/categories/%E5%89%8D%E7%AB%AF/Hexo/"/>
    
    
      <category term="前端" scheme="http://lusirbluesky.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
      <category term="Hexo" scheme="http://lusirbluesky.github.io/tags/Hexo/"/>
    
  </entry>
  
</feed>
